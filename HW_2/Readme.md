# 3D场景漫游系统 - 编程作业2

## 项目简介

这是一个基于WebGL2的3D场景漫游系统，实现了几何建模、场景漫游和交互控制功能。项目使用JavaScript和WebGL2技术，提供了丰富的3D图形交互体验。

## 功能特性

### 基本功能
-  在着色器中编写PVM矩阵进行顶点变换动画和场景漫游
-  墨西哥帽几何建模
-  键盘控制相机旋转和物体缩放
-  正投影和透视投影切换
-  后向面剔除和深度缓存消隐控制

### 附加功能 
-  复杂几何建模：墨西哥帽曲面
-  游戏式交互操作：
  - 1234键控制物体运动
  - 鼠标拖动控制相机视角

## 项目结构

```
3d-wandering/
├── 3d-wandering.html          # 主页面
├── 3d-wandering.js            # 主程序逻辑
├── models-data.js             # 几何模型数据
├── Common/                    # 公共库文件
│   ├── webgl-utils.js         # WebGL工具函数
│   ├── initShaders.js         # 着色器初始化
│   └── MVnew.js               # 矩阵向量运算库
└── README.md                  # 说明文档
```

## 快速开始

### 运行方式
1. 将所有文件放在同一目录下
2. 使用现代浏览器打开 `3d-wandering.html`
3. 确保浏览器支持WebGL2

### 系统要求
- 现代浏览器（Chrome 70+、Firefox 65+、Safari 12+、Edge 79+）
- 支持WebGL2的显卡
- 启用JavaScript

## 交互控制说明

### 模型选择
- 使用页面顶部的下拉菜单切换不同3D模型：
  - 方块 (Cube)
  - 球体 (Sphere) 
  - 墨西哥帽 (Mexican Hat)

### 相机控制
- **鼠标拖动**：自由旋转相机视角
- **W/S键**：相机绕X轴旋转
- **A/D键**：相机绕Y轴旋转
- **空格键**：重置所有参数到初始状态

### 物体控制
- **1/2键**：物体前后移动 (Z轴方向)
- **3/4键**：物体左右移动 (X轴方向)  
- **5/6键**：物体上下移动 (Y轴方向)
- **Q/W/E键**：物体绕X/Y/Z轴旋转
- **Z/C键**：物体整体放大/缩小

### 投影设置
- **P键**：切换正投影/透视投影模式
- **M/N键**：调整透视投影的俯仰角

### 渲染设置
- **R/T键**：开启/关闭后向面剔除
- **B/V键**：开启/关闭深度缓存消隐

## 技术实现

### 核心算法
- **几何建模**：参数化曲面生成墨西哥帽
- **矩阵变换**：完整的MVP（模型-视图-投影）矩阵流水线
- **着色器编程**：GLSL ES 3.0顶点和片元着色器
- **交互系统**：鼠标拖动和键盘事件处理

### 关键特性
- 实时3D渲染
- 平滑的相机动画
- 多层次几何细节
- 可配置的渲染管线

## 开发说明

### 主要文件说明

- **3d-wandering.js**：主程序，包含渲染循环、事件处理和矩阵计算
- **models-data.js**：几何模型数据生成器
- **MVnew.js**：数学库，提供矩阵和向量运算

### 扩展建议
- 添加更多几何模型
- 实现纹理映射
- 增加光照和阴影
- 支持模型导入

## 故障排除

### 常见问题
1. **页面空白**：检查浏览器控制台错误信息，确保WebGL2支持
2. **着色器错误**：确认浏览器支持GLSL ES 3.0
3. **交互无响应**：检查键盘和鼠标事件绑定

### 调试提示
- 打开浏览器开发者工具查看控制台输出
- 使用空格键重置场景状态
- 检查矩阵运算是否正确

## 许可证

本项目为计算机图形学课程作业，仅供学习和教育用途。

## 作者信息

- 课程：计算机图形学
- 作业：编程作业2 - 3D场景漫游
- 日期：2025年

---

*使用现代浏览器打开 `3d-wandering.html` 开始体验3D场景漫游！*